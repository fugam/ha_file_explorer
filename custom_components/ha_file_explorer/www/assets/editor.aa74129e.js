var C=Object.defineProperty,b=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var c=Object.getOwnPropertySymbols;var F=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var d=(o,e,t)=>e in o?C(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,i=(o,e)=>{for(var t in e||(e={}))F.call(e,t)&&d(o,t,e[t]);if(c)for(var t of c(e))g.call(e,t)&&d(o,t,e[t]);return o},u=(o,e)=>b(o,y(e));import{d as k,p as B,y as D,a as f,z as $,o as h,c as m,w as a,b as _,h as r,t as l,v as V,i as p,e as H}from"./index.407abd14.js";import{_ as N,l as v}from"./AppLayout.dc0bb97a.js";const P=H("div",{id:"editor"},null,-1),S=k({data(){return{name:""}},computed:i({},B(["absolutePath"])),created(){},mounted(){this.loadData(),window.onbeforeunload=function(){return"\u786E\u5B9A\u79BB\u5F00\u5F53\u524D\u9875\u5417\uFF1F"}},beforeRouteLeave(){window.onbeforeunload=null},methods:{loadData(){const{name:o}=this.$route.params;if(!o)return this.$router.replace("/");this.name=o;const e=this.absolutePath(o),t=document.querySelector("#editor");t.innerHTML="",this.api.service.getHassFileContent(e).then(({code:s,data:n})=>{s>0||(t.textContent=n,window.editor=window.ace.edit("editor",{theme:"ace/theme/chrome",mode:D(this.name)}),document.body.scrollIntoView())})},cancelClick(){this.$router.back()},saveClick(){const o=this.absolutePath(this.name);let e=window.editor.getValue();this.api.service.setHassFileContent(o,e).then(t=>{this.$toast(t.msg)})}}}),q=k(u(i({},S),{name:"editor",setup(o){return(e,t)=>{const s=f("va-chip"),n=f("va-button"),w=$("shortkey");return h(),m(N,{class:"views-editor"},{left:a(()=>[_(s,{flat:"",color:"#fff"},{default:a(()=>[r(l(e.name),1)]),_:1})]),right:a(()=>[V((h(),m(n,{color:"#fff",flat:"",rounded:!1,onShortkey:t[0]||(t[0]=x=>e.saveClick()),onClick:e.saveClick},{default:a(()=>[r(l(p(v).save),1)]),_:1},8,["onClick"])),[[w,["ctrl","s"]]]),_(n,{color:"#fff",flat:"",rounded:!1,onClick:e.cancelClick},{default:a(()=>[r(l(p(v).cancel),1)]),_:1},8,["onClick"])]),default:a(()=>[P]),_:1})}}}));export{q as default};
